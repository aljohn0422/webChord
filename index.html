<!doctype html>
<html>

<head>
    <title>Chord Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Bree+Serif' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Slabo+27px' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Patrick+Hand+SC' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body section {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: flex-start;
            background: #F0F0D8;
        }
        
        .button {
            font-family: 'Patrick Hand SC', cursive;
            align-self: center;
            background: transparent;
            margin: 0.3rem;
            height: 5rem;
            width: 4rem;
            color: #41403E;
            font-size: 2rem;
            letter-spacing: 1px;
            outline: none;
            border-radius: 255px 15px 225px 15px/15px 225px 15px 255px;
        }
        
        .button2 {
            font-family: 'Patrick Hand SC', cursive;
            align-self: center;
            background: transparent;
            margin: 0.3rem;
            height: 5rem;
            width: 4rem;
            color: #41403E;
            font-size: 2rem;
            letter-spacing: 1px;
            outline: none;
            border: dashed 2px;
            border-radius: 255px 15px 225px 15px/15px 225px 15px 255px;
        }
        
        h1 {
            font-family: 'Bree Serif', serif;
        }
        
        p {
            font-family: 'Slabo 27px', serif;
        }
    </style>
</head>

<body>
    <div>
        <h1><span style="color:red;font-weight:bold">Chord Harmonica</span> Web Simulator</h1>
        <p>This tool works best with <span style="background:yellow">Google Chrome</span>.</p>
    </div>
    <section>
        <button class="button2" , id="Db7">Db7</button>
        <button class="button2" , id="Ab7">Ab7</button>
        <button class="button2" , id="Eb7">Eb7</button>
        <button class="button2" , id="Bb7">Bb7</button>
        <button class="button2" , id="F7">F7</button>
        <button class="button2" , id="C7">C7</button>
        <button class="button2" , id="G7">G7</button>
        <button class="button2" , id="D7">D7</button>
        <button class="button2" , id="A7">A7</button>
        <button class="button2" , id="E7">E7</button>
        <button class="button2" , id="B7">B7</button>
        <button class="button2" , id="Gb7">F#7</button>
    </section>
    <section>
        <button class="button" , id="Gb">Gb</button>
        <button class="button" , id="Db">Db</button>
        <button class="button" , id="Ab">Ab</button>
        <button class="button" , id="Eb">Eb</button>
        <button class="button" , id="Bb">Bb</button>
        <button class="button" , id="F">F</button>
        <button class="button" , id="C">C</button>
        <button class="button" , id="G">G</button>
        <button class="button" , id="D">D</button>
        <button class="button" , id="A">A</button>
        <button class="button" , id="E">E</button>
        <button class="button" , id="B">B</button>
    </section>
    <section>
        <button class="button" , id="Gbm">Gbm</button>
        <button class="button" , id="Dbm">Dbm</button>
        <button class="button" , id="Abm">Abm</button>
        <button class="button" , id="Ebm">Ebm</button>
        <button class="button" , id="Bbm">Bbm</button>
        <button class="button" , id="Fm">Fm</button>
        <button class="button" , id="Cm">Cm</button>
        <button class="button" , id="Gm">Gm</button>
        <button class="button" , id="Dm">Dm</button>
        <button class="button" , id="Am">Am</button>
        <button class="button" , id="Em">Em</button>
        <button class="button" , id="Bm">Bm</button>
    </section>
    <section>
        <button class="button2" , id="Dbaug">C#+</button>
        <button class="button2" , id="Abdim">Abdim</button>
        <button class="button2" , id="Ebaug">Eb+</button>
        <button class="button2" , id="Bbdim">Bbdim</button>
        <button class="button2" , id="Bbaug">Bb+</button>
        <button class="button2" , id="Cdim">Cdim</button>
        <button class="button2" , id="Gaug">G+</button>
        <button class="button2" , id="Ddim">Ddim</button>
        <button class="button2" , id="Aaug">A+</button>
        <button class="button2" , id="Edim">Edim</button>
        <button class="button2" , id="Eaug">E+</button>
        <button class="button2" , id="Gbdim">F#dim</button>
    </section>
    <div style="text-align:right">
        <p>Created by HannChyun, leader and the chord player of DoNuts Harmonica Ensemble</p>
    </div>

    <script>
        // note frequencies
        var C3 = 130.81,
            Db3 = 138.59,
            D3 = 146.83,
            Eb3 = 155.56,
            E3 = 164.81,
            F3 = 174.61,
            Gb3 = 185,
            G3 = 196,
            Ab3 = 207.65,
            A3 = 220,
            Bb3 = 233.08,
            B3 = 246.94,
            C4 = 261.63,
            Db4 = 277.18,
            D4 = 293.66,
            Eb4 = 311.12,
            E4 = 329.63,
            F4 = 349.22,
            Gb4 = 370,
            G4 = 392.00,
            Ab4 = 415.30,
            A4 = 440,
            Bb4 = 466.16,
            B4 = 493.88,
            C5 = 523.25,
            Db5 = 554.35,
            D5 = 587.33,
            Eb5 = 622.25,
            E5 = 659.25,
            F5 = 698.45,
            Gb5 = 739.98,
            G5 = 783.99,
            Ab5 = 830.60,
            A5 = 880,
            Bb5 = 932.32,
            B5 = 987.767,
            C6 = 1046.5;

        // chord array
        var Gb = [Gb3, Bb3, Db4, Gb4, Gb4, Bb4, Db5, Gb5],
            Db = [F3, Ab3, Db4, F4, F4, Ab4, Db5, F5],
            Ab = [Eb3, Ab3, C4, Eb4, Eb4, Ab4, C5, Eb5],
            Eb = [Eb3, G3, Bb3, Eb4, Eb4, G4, Bb4, Eb5],
            Bb = [F3, Bb3, D4, F4, F4, Bb4, D5, F5],
            F = [F3, A3, C4, F4, F4, A4, C5, F5],
            C = [E3, G3, C4, E4, E4, G4, C5, E5],
            G = [G3, B3, D4, G4, G4, B4, D5, G5],
            D = [ Gb3, A3, D4,Gb4, Gb4, A4, D5,Gb5],
            A = [E3, A3, Db4, E4, E4, A4, Db5, E5],
            E = [E3, Ab3, B3, E4, E4, Ab4, B4, E5],
            B = [Gb3, B3, Eb3, Gb4, Gb4, B4, Eb4, Gb5],

            Gb7 = [Gb3, Bb3, Db4, E4, Gb4, Bb4, Db5, E5],
            Db7 = [F3, Ab3, Db4, B3, F4, Ab4, Db5, B4],
            Ab7 = [Gb3, Ab3, C4, Eb4, Gb4, Ab4, C5, Eb5],
            Eb7 = [Eb3, G3, Bb3, Db4, Eb4, G4, Bb4, Db5],
            Bb7 = [Ab3, Bb3, D4, F4, Ab4, Bb4, D5, F5],
            F7 = [F3, A3, C4, Eb4, F4, A4, C5, Eb5],
            C7 = [E3, G3, C4, Bb3, E4, G4, C5, Bb4],
            G7 = [G3, B3, D4, F4, G4, B4, D5, F5],
            D7 = [D3, Gb3, A3, C4, D4, Gb4, A4, C5],
            A7 = [E3, A3, Db4, G3, E4, A4, Db5, G4],
            E7 = [E3, Ab3, B3, D4, E4, Ab4, B4, D5],
            B7 = [Gb3, A3, B3, Eb4, Gb4, A4, B4, Eb4],

            Gbm = [Gb3, A3, Db4, Gb4, Gb4, A4, Db5, Gb5],
            Dbm = [E3, Ab3, Db4, E4, E4, Ab4, Db5, E5],
            Abm = [Eb3, Ab3, B3, Eb4, Eb4, Ab4, B4, Eb5],
            Ebm = [Eb3, Gb3, Bb3, Eb4, Eb4, Gb4, Bb4, Eb5],
            Bbm = [F3, Bb3, Db4, F4, F4, Bb4, Db5, F5],
            Fm = [F3, Ab3, C4, F4, F4, Ab4, C5, F5],
            Cm = [Eb3, G3, C4, Eb4, Eb4, G4, C5, Eb5],
            Gm = [G3, Bb3, D4, G4, G4, Bb4, D5, G5],
            Dm = [F3, A3, D4, F4, F4, A4, D5,F5],
            Am = [E3, A3, C4, E4, E4, A4, C5, E5],
            Em = [E3, G3, B3, E4, E4, G4, B4, E5],
            Bm = [Gb3, B3, D3, Gb4, Gb4, B4, D4, Gb5],

            Dbaug = [Db3, F3, A4, Db4, Db4, F4, A5, Db5],
            Abdim = [F3, Ab3, B3, D4, F4, Ab4, B4, D5],
            Ebaug = [Eb3, G3, B3, Eb4, Eb4, G4, B4, Eb5],
            Bbdim = [E4, G3, Bb3, Db4, E5, G4, Bb4, Db5],
            Bbaug = [Ab3, D4, Gb4, Ab4, Ab4, D5, Gb5, Ab5],
            Cdim = [Eb3, Gb3, A3, C4, Eb4, Gb4, A4, C5],
            Gaug = [G3, B3, Eb4, G4, G4, Bb4, Eb5, G5],
            Ddim = [D3, F3, A3, D4, D4, F4, A4, D5],
            Aaug = [F3, A3, Db4, F4, F4, A4, Db5, F5],
            Edim = [E3, G3, Bb3, Db4, E4, G4, Bb4, Db5],
            Eaug = [E3, Ab3, C4, E4, E4, Ab4, C5, E5],
            Gbdim = [Gb3, A3, C4, Eb4, Gb4, A4, C5, E5];


        // build the chord generator
        window.AudioContext = window.AudioContext || window.webkitAudioContext;
        var context = new AudioContext();
        var oscillator = [];
        var gainNode = [];

        // functions
        var playChord = function (chord) {
            for (i = 0; i < chord.length; i++) {
                oscillator[i] = context.createOscillator();
                gainNode[i] = context.createGain();

                oscillator[i].connect(gainNode[i]);
                gainNode[i].connect(context.destination);
                if (chord[i] > 600) {
                    gainNode[i].gain.value = 0.1;
                } else {
                    gainNode[i].gain.value = 0.2;
                }
                oscillator[i].type = 'triangle';
                oscillator[i].frequency.value = chord[i];
                oscillator[i].start(0);
            }
        }
        var stopChord = function (chord) {
            for (i = 0; i < chord.length; i++) {
                gainNode[i].gain.value = 0;
                oscillator[i].disconnect(0.2);
            }
        }

        function makeSound(id, chordBlow) {
            var getChordID = document.getElementById(id);

            if (getChordID) {
                getChordID.addEventListener("mousedown", function () {
                    playChord(chordBlow)
                });
                getChordID.addEventListener("mouseup", function () {
                    stopChord(chordBlow)
                });
                getChordID.addEventListener("mouseout", function () {
                    stopChord(chordBlow)
                });
            }
        }

        makeSound('Gb7', Gb7);
        makeSound('Db7', Db7);
        makeSound('Ab7', Ab7);
        makeSound('Eb7', Eb7);
        makeSound('Bb7', Bb7);
        makeSound('F7', F7);
        makeSound('C7', C7);
        makeSound('G7', G7);
        makeSound('D7', D7);
        makeSound('A7', A7);
        makeSound('E7', E7);
        makeSound('B7', B7);

        makeSound('Gb', Gb);
        makeSound('Db', Db);
        makeSound('Ab', Ab);
        makeSound('Eb', Eb);
        makeSound('Bb', Bb);
        makeSound('F', F);
        makeSound('C', C);
        makeSound('G', G);
        makeSound('D', D);
        makeSound('A', A);
        makeSound('E', E);
        makeSound('B', B);

        makeSound('Gbm', Gbm);
        makeSound('Dbm', Dbm);
        makeSound('Abm', Abm);
        makeSound('Ebm', Ebm);
        makeSound('Bbm', Bbm);
        makeSound('Fm', Fm);
        makeSound('Cm', Cm);
        makeSound('Gm', Gm);
        makeSound('Dm', Dm);
        makeSound('Am', Am);
        makeSound('Em', Em);
        makeSound('Bm', Bm);

        makeSound('Dbaug', Dbaug);
        makeSound('Abdim', Abdim);
        makeSound('Ebaug', Ebaug);
        makeSound('Bbdim', Bbdim);
        makeSound('Bbaug', Bbaug);
        makeSound('Cdim', Cdim);
        makeSound('Gaug', Gaug);
        makeSound('Ddim', Ddim);
        makeSound('Aaug', Aaug);
        makeSound('Edim', Edim);
        makeSound('Eaug', Eaug);
        makeSound('Gbdim', Gbdim);
    </script>
</body>

</html>